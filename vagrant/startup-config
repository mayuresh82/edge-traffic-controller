! Startup-config last modified at Wed Dec 30 20:42:09 2020 by vagrant
! device: veos1 (vEOS, EOS-4.25.1F)
!
! boot system flash:/vEOS-lab.swi
!
load-interval default 30
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model ribd
!
hostname veos1
!
sflow sample dangerous 5000
sflow polling-interval 30
sflow destination 10.1.4.100
sflow source-interface Loopback0
sflow extension bgp
sflow run
!
spanning-tree mode mstp
!
aaa authorization exec default local
!
no aaa root
!
username vagrant privilege 15 secret sha512 $6$KF3XpDbWuCA4RoL.$lA0dBaXmzWfgZRfZs8P3LdHZvscQd0niMuIXLp.GkOnqrhvvRPbSLVsjUQk6zBIcxvDLIp3IF3trkncy7oLwL0
username vagrant ssh-key ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key
!
vlan 300,400
!
interface Ethernet1
   description PEERING_LINK
   load-interval 30
   speed forced 1000full
   no switchport
   ip address 172.16.0.1/31
   no sflow enable
!
interface Ethernet2
   description TRANSIT_LINK
   load-interval 30
   no switchport
   ip address 172.16.0.3/31
   no sflow enable
!
interface Ethernet3
   description SRV3
   switchport access vlan 300
   sflow enable
!
interface Ethernet4
   description SRV4
   switchport access vlan 400
   sflow enable
!
interface Ethernet5
!
interface Loopback0
   ip address 50.50.50.50/32
!
interface Management1
   ip address dhcp
!
interface Vlan300
   ip address 10.1.3.1/24
!
interface Vlan400
   ip address 10.1.4.1/24
!
event-handler ALTER-VAGRANT-SHELL
   action bash sudo sed -i 's:^username vagrant privilege 15 shell /bin/bash :username vagrant privilege 15 :g' /mnt/flash/startup-config
   delay 60
!
event-handler COPY-STARTUP-TO-RUNNING
   action bash FastCli -p 15 -c 'configure replace startup-config'
   delay 70
!
ip routing
!
ip prefix-list ALL
   seq 10 permit 0.0.0.0/0 le 32
!
ip prefix-list SRV_SUBNETS
   seq 10 permit 10.1.3.0/24
   seq 20 permit 10.1.4.0/24
   seq 30 permit 10.1.5.0/24
!
route-map PEERING_IN permit 10
   match ip address prefix-list ALL
   set local-preference 500
!
route-map PEERING_OUT permit 10
   match ip address prefix-list SRV_SUBNETS
!
route-map TRANSIT_IN permit 10
   match ip address prefix-list ALL
!
route-map TRANSIT_OUT permit 10
   match ip address prefix-list SRV_SUBNETS
!
router bgp 12121
   neighbor 172.16.0.0 remote-as 33010
   neighbor 172.16.0.0 route-map PEERING_IN in
   neighbor 172.16.0.0 route-map PEERING_OUT out
   neighbor 172.16.0.0 maximum-routes 12000
   neighbor 172.16.0.2 remote-as 42428
   neighbor 172.16.0.2 route-map TRANSIT_IN in
   neighbor 172.16.0.2 route-map TRANSIT_OUT out
   neighbor 172.16.0.2 maximum-routes 12000
   redistribute connected
!
management api http-commands
   no protocol https
   protocol http
   no shutdown
!
end
